# ОКПД2 Обработчик Файлов

Автоматизированное программное обеспечение для классификации товаров и услуг по кодам ОКПД2 (Общероссийский классификатор продукции по видам экономической деятельности) на основе анализа текстовых описаний.

## Описание проекта

Приложение предназначено для автоматической обработки файлов Excel с наименованиями товаров и услуг и присвоения им соответствующих кодов ОКПД2. Система использует технологии машинного обучения и веб-скрапинг для точного определения подходящих кодов классификации.

## Основные возможности

- Обработка файлов Excel в различных форматах:
  - Стандартный формат (с колонкой 'Наименование')
  - Полный формат (с пропуском заголовков и обработкой сложных таблиц)
- Автоматическая группировка схожих наименований для более точной классификации
- Нормализация и упрощение наименований для улучшения качества поиска
- Загрузка данных классификатора ОКПД2 с официальных источников
- Интеллектуальный выбор наиболее подходящего кода для каждого наименования
- Сохранение промежуточных результатов для защиты от потери данных
- Встроенный кэш для ускорения повторной обработки
- Веб-интерфейс на базе Gradio для удобного использования

## Установка и запуск

### Через Docker (рекомендуемый способ)

1. Убедитесь, что у вас установлены Docker и Docker Compose:

```bash
docker --version
docker-compose --version
```

2. Клонируйте репозиторий:

```bash
git clone <url-репозитория>
cd OKPD_fetcher
```

3. Соберите и запустите контейнер:

```bash
docker-compose up -d
```

4. Откройте веб-интерфейс по адресу: http://localhost:7860

### Локальная установка

1. Установите Python 3.13 или выше
2. Установите зависимости:

```bash
pip install -r requirements.txt
```

3. Установите браузер для Playwright:

```bash
playwright install chromium
playwright install-deps
```

4. Запустите приложение:

```bash
python app.py
```

## Использование

1. Откройте веб-интерфейс по адресу http://localhost:7860
2. Выберите соответствующую вкладку в зависимости от формата вашего файла
3. Загрузите Excel-файл
4. При необходимости настройте параметры обработки:
   - Имя файла для промежуточных результатов
   - Интервал сохранения
   - Количество пропускаемых строк заголовка (для полного формата)
5. Запустите обработку и дождитесь ее завершения
6. Скачайте файл результатов

## Структура проекта

- `app.py` - Основной файл приложения с веб-интерфейсом Gradio
- `main.py` - Модуль основной логики обработки
- `processors/` - Модули обработчиков для разных форматов файлов
- `src/` - Вспомогательные модули и функции
- `models/` - Директория для хранения моделей
- `data/` - Директория для хранения данных

## Технологии

- Python 3.11
- Gradio - для веб-интерфейса
- Pandas - для работы с данными
- Playwright - для скрапинга данных ОКПД2
- PyMorphy3 - для морфологического анализа
- Docker/Docker Compose - для контейнеризации
- ML / DL- для классификации и группировки наименований
